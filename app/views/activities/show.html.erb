<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @activity.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @activity.description %>
</p>

<p>
  <strong>Level:</strong>
  <%= @activity.level %>
</p>

<p>
  <strong>Type:</strong>
  <%= @activity.game %>
</p>

<p>
  <strong>Location:</strong>
  <%= @activity.address %>
</p>

<p>
  <strong>Created By:</strong>
  <%= @activity.user.username %>
</p>


<% if logged_in_admin? %>
<%= link_to 'Edit', edit_activity_path(@activity) %> |
<%= link_to 'Destroy', @activity, method: :delete, data: { confirm: 'Are you sure?' } %>|
<% end %>

<%= link_to 'Back', activities_path %>

<%= form_for(@user_activity) do |f| %>
  <% if @user_activity.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user_activity.errors.count, "error") %> prohibited this user_activity from being saved:</h2>

      <ul>
      <% @user_activity.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <br>
  <% if logged_in? %>
  <h3> Are you attending this Event? </h3>
  <div class="field">
     <%= f.select :attending, ['Yes', 'Maybe']%>
  </div>
  <div>
    <%= f.hidden_field(:user_id, :value => @current_user.id)%>
  </div>
  <div class="field">
    <%= f.hidden_field(:activity_id, :value => @activity.id)%>
  </div>
  <div class="actions">
    <%= f.submit "RSVP" %>
  </div>
<% end %>
<% end %>


<h3> Attendees </h3>
<% @activity.attending_users.each do |ua| %>
      <tr>
        <td><%= ua.username %></td>
        <% if logged_in_admin? || ua.id == current_user.id %>
        <td><%= link_to 'Destroy', ua, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
        <br>
      </tr>
    <% end %>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<script>
  handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
</script>
  <!-- comment section below -->
        <div class="commentaddition">
          <div id="commentaddin">
            <% if logged_in_admin? || logged_in? %>
            <%= content_tag :h3, "Make a Comment." %>
            <%= form_for @comment do |f| %>
            <%= f.label :body %>
            <%= f.text_field :body %>
            <br>
            <br>
            <%= f.hidden_field(:activity_id, :value => @activity.id)%>
            <%= f.submit :create %>
            <% end %>
           <% end %> 
          </div>
        </div>
        <div class="commentcontainer">
          <div id="commentin">
            <% @activity.comments.each do |comment| %>
            <%= comment.body %>
            <br>
            <%= comment.user.username %>
            <br>
              <!-- This conditional makes sure only comment author can delete comment -->
              <% if comment.user_id == @current_user.id %>
              <%= link_to("Delete comment", comment_path(comment.id), method: :delete) %>
              <% end %>
            <% end %>


