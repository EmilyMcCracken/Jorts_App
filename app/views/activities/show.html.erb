<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @activity.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @activity.description %>
</p>

<p>
  <strong>Level:</strong>
  <%= @activity.level %>
</p>

<p>
  <strong>Type:</strong>
  <%= @activity.game %>
</p>

<p>
  <strong>Location:</strong>
  <%= @activity.address %>
</p>

<%= link_to 'Edit', edit_activity_path(@activity) %> |
<%= link_to 'Back', activities_path %>

<%= form_for(@user_activity) do |f| %>
  <% if @user_activity.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user_activity.errors.count, "error") %> prohibited this user_activity from being saved:</h2>

      <ul>
      <% @user_activity.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <br>
  <h3> Are you attending this Event? </h3>
  <div class="field">
     <%= f.select :attending, ['Yes', 'Maybe']%>
  </div>
  <div>
    <%= f.hidden_field(:user_id, :value => @current_user.id)%>
  </div>
  <div class="field">
    <%= f.hidden_field(:activity_id, :value => @activity.id)%>
  </div>
  <div class="actions">
    <%= f.submit "RSVP" %>
  </div>
<% end %>


<h3> Attendees </h3>
<% @activity.users.each do |ua| %>
      <tr>
        <td><%= ua.username %></td>
        <br>
      </tr>
    <% end %>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<script>
  handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
</script>


